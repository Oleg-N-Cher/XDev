(*
;------ пример использования -------
        INCBIN  "ace.m"
        ORG  #7000
        DI 
        CALL Compile
play_l  EI 
        HALT 
        CALL Compile+5
        LD   A,#0x7F
        IN   A,(-2)
        RRA 
        JR   C,play_l
        JP   Compile+8
*)

MODULE PT3x0A;
IMPORT SYSTEM;

TYPE
  Melody* = INT16;
  ADDRESS = INT32;

PROCEDURE Install* (module: ADDRESS); END Install;
PROCEDURE Play* ; END Play;
PROCEDURE Stop* ; END Stop;

PROCEDURE -TabAdr* (): INT16 "((int)&PT3x0A_TabAdr)";

END PT3x0A.

(*

http://zxpress.ru/article.php?id=9508

3Bit #01 
03 января 2005         
Программинг - новый быстрый и короткий PT3.x Player от RSM.
--------------------------------------------------------------------------------

      PT3.x Player от RSM

(c) Dr.Lion/RSM
------------------------------------------
  Вашему вниманию предлагается первый пле-
йер  Pro Tracker 3.x из  семейства плееров
от  RSM. Само семейство представляет собой
несколько хорошо оформленных исходников PT
3.x плееров.  Название  каждого  исходника
включает в себя несколько полей, описываю-
щих особенности каждого отдельного плеера.
Предлагаемый   вам  плеер  имеет  название
PT3x0A. Сигнатура  "PT3x" указывает на то,
что  этот  плеер  проигрывает модули любой
версии  3-го Pro Tracker'а. Поле "0" - это
глобальный  номер версии ядра. Здесь также
может быть "1", "2" и т. д. Это поле озна-
чает следующее:

0 - новое универсальное медленное ядро ма-
    лого размера;
1 - новое   развёрнутое  быстродействующее
    ядро среднего размера.

  Поле  "A" - это подверсия ядра указываю-
щая  на специфическую его оптимизацию. Это
поле может содержать следующие символы:

А - ядро  оптимизировано  под  минимальный
    размер и среднее качество звука;
B - ядро оптимизировано под повышенное бы-
    стродействие и среднее качество звука;
C - ядро оптимизировано под повышенное бы-
    стродействие и высокое качество звука.

  Каждый вариант оптимизации ядра расчитан
на  свою  область  применения  и имеет ряд
преимуществ (недостатков). Так оптимизация
"А" расчитана на применение в условиях же-
сткой  нехватки  памяти. Оптимизация "B" -
это та самая "золотая середина" - приемле-
мый  размер  и качество звука. Оптимизация
"C" - это  элитная  версия плеера, которая
при  повышенном быстродействии также обес-
печивает  высокое  качество звука и полную
совместимость с версией редактора, в кото-
ром написан музыкальный модуль.
  Все  плееры  от  RSM обладают следующими
общими особенностями:

1. Темп проигрывания вплоть до 1.
2. Присутствует  точка  входа  по смещению
   +#008, по которой выключается звук муз.
   сопроцессора.
3. Команда  VIBRATO работает точно так же,
   как и в муз.редакторе.
4. Унаследованы  все лучшие стороны плеера
   RC367 by Alone Coder (ядро этого плеера
   является базовым).
5. Полностью  контролируется  выход номера
   ноты  за  допустимые пределы (например,
   при  использовании очень больших откло-
   нений в орнаменте).
6. По  смещению +#200 (область таблицы де-
   лителей для частот нот) находится новая
   точка входа Test MPU. Ею можно восполь-
   зоваться только до начала использования
   самого плеера. В результате работы этой
   точки  вы в HL получите ссылку на стро-
   ку-сообщение, которое  указывает на на-
   личие и тип муз.сопроцессора. Подробнее
   смотрите в исходниках.

  Ну  а теперь несколько слов о предлагае-
мом вам плеере PT3x0A. Основные характери-
стики:

1. Плеер  полнофункциональный, поэтому иг-
   рает модули без каких-либо ограничений.
2. Рекордно малый размер : 1756 байт
3. Среднее время работы  : 5440 тактов
4. Пиковое время работы  : 8864 тактов
5. Качество звука        : среднее
6. В  плеере  используется  4 генерируемых
   частотных таблички по алгоритму И.Рощи-
   на. Благодаря этому он играет любой мо-
   дуль  вне зависимости от использованной
   им частотной таблицы.
7. Команда  TONE  PORTAMENTO  работает  по
   стандарту PT3.6x (хотя некоторым это не
   нравится).

  Главный  недостаток этого плеера - боль-
шая разница между средним и пиковым време-
нем работы.
  Оценить  качество работы этого плеера вы
можете  прямо  сейчас! Музыка, которую  вы
слышите, проигрывается  именно PT3x0A! Ис-
ходник этого плеера вы можете найти в при-
ложении  журнала, а  исходники других пле-
еров RSM ищите в приложениях следующих вы-
пусков.
------------------------------------------ *)
